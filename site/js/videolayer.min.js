/* VideoLayer 1.0 by Gordon Lambot */
function VideoLayer(){function at(e,t){var n=document.createElement(e);if(t!="")n.className=t;return n}function ft(t,n,r,i,s){if(i!=""){t.setAttribute(i,s)}if(n!=""){t.style.cssFloat=window.getComputedStyle(e[s],"").cssFloat;t.style.top=window.getComputedStyle(e[s],"").top;t.style.right=window.getComputedStyle(e[s],"").right;t.style.bottom=window.getComputedStyle(e[s],"").bottom;t.style.left=window.getComputedStyle(e[s],"").left;t.style.width=window.getComputedStyle(e[s],"").width;t.style.height=window.getComputedStyle(e[s],"").height;t.style.marginTop=window.getComputedStyle(e[s],"").marginTop;t.style.marginRight=window.getComputedStyle(e[s],"").marginRight;t.style.marginBottom=window.getComputedStyle(e[s],"").marginBottom;t.style.marginLeft=window.getComputedStyle(e[s],"").marginLeft;t.style.paddingTop=window.getComputedStyle(e[s],"").paddingTop;t.style.paddingRight=window.getComputedStyle(e[s],"").paddingRight;t.style.paddingBottom=window.getComputedStyle(e[s],"").paddingBottom;t.style.paddingLeft=window.getComputedStyle(e[s],"").paddingLeft;m[s]=t.style.width;g[s]=t.style.height;y[s][0]=t.style.marginTop;y[s][1]=t.style.marginRight;y[s][2]=t.style.marginBottom;y[s][3]=t.style.marginLeft;b[s][0]=t.style.paddingTop;b[s][1]=t.style.paddingRight;b[s][2]=t.style.paddingBottom;b[s][3]=t.style.paddingLeft;w[s][0]=t.style.top;w[s][1]=t.style.right;w[s][2]=t.style.bottom;w[s][3]=t.style.left;if(window.getComputedStyle(e[s],"").position!="static"){t.style.position=window.getComputedStyle(e[s],"").position}}}function lt(){for(i=0;i<p;i++){o[i]={container:at("div","vl_ui"),presentationscreen:at("div","vl_presentation_screen vl_active"),bigplay:at("button","vl_big_play vl_background"),loadingscreen:at("div","vl_loading_screen"),buffer:at("div","vl_buffer"),titles:at("div","vl_title vl_background"),videotitle:at("h1","vl_videotitle"),playlisttitle:at("h2","vl_playlisttitle"),vidnum:at("span",""),menus:at("div","vl_menus"),playlistmenu:at("div","vl_playlist_menu"),playlisttmbn:at("div","vl_playlist_thumbnails vl_background"),pul:at("ul",""),playlistbttns:at("div","vl_playlist_buttons"),pshuffle:at("button","vl_playlist_shuffle vl_background"),prepeat:at("button","vl_playlist_repeat vl_background"),playlistscroll:at("div","vl_playlist_scroll"),pscrollbar:at("div","vl_playlist_scrollbar vl_maincolor"),captionsmenu:at("div","vl_captions_menu vl_background"),captionslist:at("div","vl_captions_list vl_maincolor"),cul:at("ul",""),captionsscroll:at("div","vl_captions_scroll"),cscrollbar:at("div","vl_captions_scrollbar vl_maincolor"),volumemenu:at("div","vl_volume_menu"),volumecontrol:at("div","vl_volume_controller vl_background"),maxvolume:at("div","vl_max_volume vl_maincolor"),vlevel:at("div","vl_volume_level vl_current"),vbar:at("div","vl_volume_bar"),controls:at("div","vl_controls vl_background"),loadingbar:at("div","vl_loadingbar"),timetooltip:at("div","vl_timetooltip vl_background"),loaded:at("div","vl_loaded vl_maincolor"),played:at("div","vl_played vl_current"),timebar:at("div","vl_timebar"),buttons:at("div","vl_buttons"),play:at("button","vl_play"),videotime:at("p","vl_time"),rightbuttons:at("ul","vl_rightbuttons"),buttonsli:[],playlist:at("button","vl_playlist"),captions:at("button","vl_captions"),repeat:at("button","vl_repeat"),quality:at("button","vl_quality"),volume:at("button","vl_volume vl_loud"),fullscreen:at("button","vl_fullscreen vl_normal")};if(e[i].getAttribute("preload")=="preload"||e[i].getAttribute("preload")==""){e[i].setAttribute("preload","metadata")}o[i].container.setAttribute("tabindex",i);ft(o[i].container,e[i].clientWidth,e[i].clientHeight,"data-num",i);e[i].parentNode.insertBefore(o[i].container,e[i]);o[i].container.appendChild(e[i]);f=[o[i].playlist,o[i].captions,o[i].repeat,o[i].quality,o[i].volume,o[i].fullscreen];for(j=0;j<6;j++){o[i].buttonsli[j]=at("li","");o[i].buttonsli[j].appendChild(f[j]);o[i].rightbuttons.appendChild(o[i].buttonsli[j])}o[i].playlist.setAttribute("data-content","Playlist");o[i].captions.setAttribute("data-content","Captions");o[i].repeat.setAttribute("data-content","Repeat (is off)");o[i].quality.setAttribute("data-content","High definition (is off)");o[i].fullscreen.setAttribute("data-content","Full screen");o[i].presentationscreen.appendChild(o[i].bigplay);o[i].loadingscreen.appendChild(o[i].buffer);o[i].playlisttitle.appendChild(o[i].vidnum);o[i].titles.appendChild(o[i].videotitle);o[i].titles.appendChild(o[i].playlisttitle);o[i].playlisttmbn.appendChild(o[i].pul);o[i].playlistbttns.appendChild(o[i].pshuffle);o[i].playlistbttns.appendChild(o[i].prepeat);o[i].playlistscroll.appendChild(o[i].pscrollbar);o[i].playlistmenu.appendChild(o[i].playlisttmbn);o[i].playlistmenu.appendChild(o[i].playlistbttns);o[i].playlistmenu.appendChild(o[i].playlistscroll);o[i].captionslist.appendChild(o[i].cul);o[i].captionsscroll.appendChild(o[i].cscrollbar);o[i].captionsmenu.appendChild(o[i].captionslist);o[i].captionsmenu.appendChild(o[i].captionsscroll);o[i].maxvolume.appendChild(o[i].vlevel);o[i].maxvolume.appendChild(o[i].vbar);o[i].volumecontrol.appendChild(o[i].maxvolume);o[i].volumemenu.appendChild(o[i].volumecontrol);o[i].menus.appendChild(o[i].playlistmenu);o[i].menus.appendChild(o[i].captionsmenu);o[i].menus.appendChild(o[i].volumemenu);o[i].loadingbar.appendChild(o[i].timetooltip);o[i].loadingbar.appendChild(o[i].loaded);o[i].loadingbar.appendChild(o[i].played);o[i].loadingbar.appendChild(o[i].timebar);o[i].buttons.appendChild(o[i].play);o[i].buttons.appendChild(o[i].videotime);o[i].buttons.appendChild(o[i].rightbuttons);o[i].controls.appendChild(o[i].loadingbar);o[i].controls.appendChild(o[i].buttons);o[i].container.appendChild(o[i].presentationscreen);o[i].container.appendChild(o[i].loadingscreen);o[i].container.appendChild(o[i].titles);o[i].container.appendChild(o[i].menus);o[i].container.appendChild(o[i].controls);t[i]=[];ct(i);kt(o[i].container);if(e[i].className.indexOf("vl_playlist")>-1)e[i].className="videolayer vl_playlist vl_video";else e[i].className="videolayer vl_video";n[i]=[r[i][0]];o[i].videotitle.innerHTML=t[i][n[i]][r[0][1]][0].title;L[i]=[];L[i][0]=[];L[i][1]=[];ut[i]="";if(r[i][0]>0)pt(t[i][n[i]],i);else{vt(t[i][n[i]],i);dt(t[i][n[i]],i)}if(!isNaN(e[i].duration)){R[i]=bt(e[i].duration,i);U[i]=e[i].duration}else R[i]="00:00";if(!isNaN(e[i].currentTime))z=bt(e[i].currentTime,i);else vl_currentTime="00:00";o[i].videotime.innerHTML=z+" / "+R[i];K[i]=0;A[i]=[];O[i]=[];D[i]=[];C[i]=[];C[i][0]=o[i].pul;C[i][1]=o[i].cul;N[i]=true;F[i]=true;B[i]=.7;if(e[i].muted)B[i]=0;e[i].volume=B[i];Z[i]=false;et[i]=false;H[i]=o[c].vbar.clientHeight;Lt(i);o[i].menus.style.height=E[i]+"px";if(B[i]>.5)o[i].volume.className="vl_volume vl_loud";else if(B[i]<=.5&&B[i]>0)o[i].volume.className="vl_volume vl_low";else if(B[i]<=0)o[i].volume.className="vl_volume vl_mute";if(e[i].className.indexOf("vl_playlist")>-1){o[i].vidnum.innerHTML=yt(i)[0]+"/"+yt(i)[1];a[i]=document.createTextNode(e[i].title);o[i].playlisttitle.insertBefore(a[i],o[i].vidnum);o[i].playlisttitle.className="vl_playlisttitle vl_show";o[i].playlist.className="vl_playlist vl_show";ot[i]=[];for(j=0;j<yt(i)[1];j++){var s,u,l,h,d,v;ot[i][j]=false;s=at("li","");if(j==r[i][0]){u=at("figure","vl_current")}else u=at("figure","");u.setAttribute("data-num",j);l=at("div","vl_thumbnail");h=at("figcaption","");d=t[i][j].sd[0].getAttribute("data-tmbn");if(d!=null)l.style.backgroundImage='url("'+d+'")';v=document.createTextNode(t[i][j].sd[0].title);h.appendChild(v);u.appendChild(l);u.appendChild(h);s.appendChild(u);o[i].pul.appendChild(s);L[i][0].push(u)}}At(i);if(e[i].autoplay)Xt();else o[i].presentationscreen.className="vl_presentation_screen vl_active vl_show";if(e[i].loop)hn(o[i].repeat);Et(i)}}function ct(n){var i=e[n].getElementsByTagName("source"),o=e[n].getElementsByTagName("track"),u=0,a=0,f,l;r[n]=[0,"sd"];t[n][u]={sd:[],hd:[],tracks:[]};for(var c=0,h=i.length;c<h;c++){s[n]=[];if(i[c].getAttribute("data-num")!=null)a=i[c].getAttribute("data-num");f=i[c].getAttribute("data-hd");l=i[c].getAttribute("data-def");if(a==u){if(f=="hd"){t[n][a].hd.push(i[c]);if(l=="def")r[n]=[a,"hd"]}else{t[n][a].sd.push(i[c]);if(l=="def")r[n]=[a,"sd"]}}else{u++;t[n][u]={sd:[],hd:[],tracks:[]};if(l=="def")r[n]=a;if(f=="hd"){t[n][a].hd.push(i[c]);if(l=="def")r[n]=[a,"hd"]}else{t[n][a].sd.push(i[c]);if(l=="def")r[n]=[a,"sd"]}}}u=0;var p=0;for(var d=0,h=o.length;d<h;d++){if(o[d].getAttribute("data-num")!=null)a=o[d].getAttribute("data-num");else a=0;l=o[d].getAttribute("data-def");if(a==u){t[n][a].tracks.push(o[d]);if(l=="def")s[n][a]=p;p++}else{u++;p=0;t[n][a].tracks.push(o[d]);if(l=="def")s[n][a]=p;p++}}}function ht(e,t,n){if(e.getAttribute(t)==n)return true;else return false}function pt(t,n){var r=e[n].children[0],i=t.sd[0].getAttribute("data-num");if(t.sd.length>0||t.hd.length>0){vt(t,n);if(rt){for(k=0;k<t.hd.length;k++){e[n].insertBefore(t.hd[k],r)}}else{for(k=0;k<t.sd.length;k++){e[n].insertBefore(t.sd[k],r)}}rt=false;e[n].load();e[n].addEventListener("canplay",function(){function t(){mt(n);e[n].removeEventListener("canplay",t,true)}return t}(),true);e[n].addEventListener("progress",function(){function t(){mt(n);e[n].removeEventListener("progress",t,true)}return t}(),true);e[n].addEventListener("canplaythrough",function(){function t(){gt(n);e[n].removeEventListener("canplaythrough",t,true)}return t}(),true);dt(t,n)}}function dt(n,r){if(n.tracks.length>0&&document.createElement("track").track){var i,u,a,f=e[r].getElementsByTagName("track"),c=-2;if(n.sd[0].getAttribute("data-num")!=null)a=n.sd[0].getAttribute("data-num");else a=0;for(k=0;k<f.length;k++){if(typeof e[r].textTracks!="undefined"){e[r].textTracks[k].mode="hidden"}}L[r][1]=[];while(o[r].cul.firstChild){o[r].cul.removeChild(o[r].cul.firstChild)}if(o[r].captions.className.indexOf("vl_show")<0)o[r].captions.className+=" vl_show";u=document.createTextNode("None");i=at("li","vl_current");i.setAttribute("data-num",a);i.appendChild(u);o[r].cul.appendChild(i);L[r][1].push(i);i.addEventListener("mousedown",function(){sn(o[r].captionsmenu,this,r,1)},false);for(j=0;j<n.tracks.length;j++){var h,p=Array.prototype.slice.call(f,0);p=p.indexOf(t[r][a].tracks[j]);u=document.createTextNode(t[r][a].tracks[j].getAttribute("label"));if(u.textContent==ut[r]){c=j}else if(ut[r]=="None"){c=-1}if(j==s[r][a]){h=at("li","vl_current");i.className="";if(typeof e[r].textTracks!="undefined"){if(typeof e[r].textTracks[p]!="undefined"){e[r].textTracks[p].mode="showing"}}}else h=at("li","");h.setAttribute("data-num",a);h.setAttribute("data-track",j);h.appendChild(u);o[r].cul.appendChild(h);L[r][1].push(h);h.addEventListener("mousedown",function(){sn(o[r].captionsmenu,this,r,1)},false)}if(c>-2){p=Array.prototype.slice.call(f,0);p=p.indexOf(t[r][a].tracks[c]);if(typeof e[r].textTracks!="undefined"){for(k=0;k<f.length;k++){e[r].textTracks[k].mode="hidden"}for(l=0;l<n.tracks.length;l++){o[r].cul.children[l].className=""}if(p>-1){if(typeof e[r].textTracks[p]!="undefined"){e[r].textTracks[p].mode="showing"}}o[r].cul.children[c+1].className="vl_current"}}}else{L[r][1]=[];while(o[r].cul.firstChild){o[r].cul.removeChild(o[r].cul.firstChild)}if(typeof e[r].textTracks!="undefined"){for(k=0;k<f.length;k++){e[r].textTracks[k].mode="hidden"}}o[r].captions.className="vl_captions"}}function vt(t,n){if(t.hd.length<=0){if(o[n].quality.className.indexOf("vl_remove")<0)o[n].quality.className+=" vl_remove"}else{o[n].quality.className=o[n].quality.className.replace(" vl_remove","")}if(t.sd[0].getAttribute("data-rep")=="rep"){o[n].repeat.className=o[n].repeat.className.replace(" vl_remove","");if(o[n].repeat.className.indexOf("vl_active")>-1)e[n].loop=true}else{if(o[n].repeat.className.indexOf("vl_remove")<0)o[n].repeat.className+=" vl_remove";e[n].loop=false}}function mt(t){if(nt)e[t].play()}function gt(t){var n;if(e[t].readyState>=2)e[t].currentTime=W;R[t]="";R[t]=bt(e[t].duration,t);U[t]=e[t].duration;o[t].videotime.innerHTML=z+" / "+R[t]}function yt(t){var n=0,t,r=e[t].getElementsByTagName("source"),i=0,s=0,o;while(i<r.length){if(r[i].getAttribute("data-num")){o=parseFloat(r[i].getAttribute("data-num"));if(n<o)n=o;if(r[i].getAttribute("data-def")){if(r[i].getAttribute("data-def")=="def"){t=o;t++}}}i++}n++;if(t==0)t++;return[t,n]}function bt(e,t){if(isNaN(e))var n="00:00";else{var r=parseInt(e,10);var i=Math.floor(r/3600);var s=Math.floor((r-i*3600)/60);var e=r-i*3600-s*60;if(i<10){i="0"+i}if(s<10){s="0"+s}if(e<10){e="0"+e}if(typeof R[t]==="undefined"){if(i>0)var n=i+":"+s+":"+e;else var n=s+":"+e}else{if(i>0||R[t].length>5)var n=i+":"+s+":"+e;else var n=s+":"+e}}return n}function wt(e){var t=0,n=0;do{if(!document.webkitFullscreenElement||e.className.indexOf("vl_ui")<0){t+=e.offsetTop||0;n+=e.offsetLeft||0}e=e.offsetParent}while(e);return{left:n,top:t}}function Et(t){window.addEventListener("resize",function(){At(t)},false);e[t].addEventListener("play",function(e){St(e,t);Gt(t)},false);e[t].addEventListener("pause",function(e){St(e,t)},false);e[t].addEventListener("waiting",function(){Nt(t)},false);e[t].addEventListener("ended",function(){Jt(t,"next")},false);o[t].container.addEventListener("mousedown",function(){kt(this)},false);o[t].container.addEventListener("mouseover",function(){kt(this);xt(t)},false);o[t].container.addEventListener("mouseup",function(){Mt();o[t].container.focus()},false);o[t].container.addEventListener("mouseleave",function(){Tt(t)},false);o[t].presentationscreen.addEventListener("mouseup",Xt,false);o[t].controls.addEventListener("mouseover",function(){u=true},false);o[t].controls.addEventListener("mouseleave",function(){u=false},false);o[t].timebar.addEventListener("mouseover",jt,false);o[t].timebar.addEventListener("mousemove",function(e){Ft(e,t)},false);o[t].timebar.addEventListener("mousedown",function(e){Ut(e,t)},false);o[t].timebar.addEventListener("mouseleave",qt,false);o[t].play.addEventListener("mouseup",Xt,false);o[t].playlist.addEventListener("mouseup",function(){nn(o[t].playlist,o[t].playlistmenu,true)},false);o[t].pul.addEventListener("scroll",function(){on(o[t].pscrollbar,0)},false);for(j=0;j<L[t][0].length;j++)L[t][0][j].addEventListener("mousedown",function(){sn(o[t].playlistmenu,this,t,0)},false);o[t].playlistscroll.addEventListener("mousedown",function(e){un(e,o[t].playlistscroll,o[t].pscrollbar,0)},false);o[t].pshuffle.addEventListener("mouseup",function(){Qt(o[t].pshuffle)},false);o[t].prepeat.addEventListener("mouseup",function(){Qt(o[t].prepeat)},false);o[t].captions.addEventListener("mouseup",function(){nn(o[t].captions,o[t].captionsmenu,true)},false);o[t].cul.addEventListener("scroll",function(){on(o[t].cscrollbar,1)},false);for(j=0;j<L[t][1].length;j++)L[t][1][j].addEventListener("mousedown",function(){sn(o[t].captionsmenu,this,t,1)},false);o[t].captionsscroll.addEventListener("mousedown",function(e){un(e,o[t].captionsscroll,o[t].cscrollbar,1)},false);o[t].repeat.addEventListener("mouseup",function(){hn(o[t].repeat)},false);o[t].quality.addEventListener("mouseup",function(){hn(o[t].quality)},false);o[t].volume.addEventListener("mouseover",pn,false);o[t].volume.addEventListener("mouseup",dn,false);o[t].volume.addEventListener("mouseleave",vn,false);o[t].volumemenu.addEventListener("mouseover",mn,false);o[t].volumemenu.addEventListener("mouseleave",vn,false);o[t].vbar.addEventListener("mousedown",gn,false);o[t].fullscreen.addEventListener("mouseup",wn,false);window.addEventListener("mouseup",Bt,false)}function St(e,t){if(e.type=="play"&&o[t].play.className.indexOf("vl_playing")<0){Vt(t)}else if(e.type=="pause"&&o[t].play.className.indexOf("vl_playing")>-1){$t(t)}}function xt(e){o[e].container.className=o[e].container.className.replace(" vl_nocursor","");if(tt[e])clearTimeout(tt[e]);o[e].titles.className=o[e].titles.className.replace("vl_hiding","");o[e].menus.className=o[e].menus.className.replace("vl_hiding","");o[e].controls.className=o[e].controls.className.replace("vl_hiding","")}function Tt(t){var n;if(o[t].playlist.className.indexOf("vl_active")<0&&o[t].captions.className.indexOf("vl_active")<0&&e[t].paused==false&&!u){tt[t]=setTimeout(function(){o[t].titles.className+=" vl_hiding";if(o[t].menus.className.indexOf("vl_hiding")<0)o[t].menus.className+=" vl_hiding";if(o[t].controls.className.indexOf("vl_hiding")<0)o[t].controls.className+=" vl_hiding";if(n)clearTimeout(n);if(o[t].fullscreen.className.indexOf("vl_active")>-1){n=setTimeout(function(){if(o[c].container.className.indexOf("vl_nocursor")<0)o[c].container.className+=" vl_nocursor"},300)}},2e3)}}function Nt(t){if(o[t].loadingscreen.className.indexOf("vl_show")<0&&et[t]==false)o[t].loadingscreen.className+=" vl_show";else o[t].loadingscreen.className="vl_loading_screen";e[t].addEventListener("canplaythrough",Ct,false)}function Ct(){o[G].loadingscreen.className="vl_loading_screen";e[G].removeEventListener("canplaythrough",Ct,false)}function kt(t){c=t.getAttribute("data-num");d[c]=e[c].clientWidth;v[c]=e[c].clientHeight;x[c]=o[c].timetooltip.clientWidth;P[c]=o[c].vbar.clientHeight}function Lt(e){var t,n;t=o[e].menus.offsetTop-o[e].titles.clientHeight;n=C[e][0].offsetTop;o[e].presentationscreen.style.height=v[e]-o[e].titles.clientHeight-o[e].controls.clientHeight+"px";E[e]=v[e]-o[e].menus.offsetTop-o[e].controls.clientHeight-t;S[e]=E[e]-n*2}function At(e){kt(o[e].container);Lt(e);o[e].container.style.width=d[e]+"px";o[e].container.style.height=v[e]+"px";o[e].menus.style.height=E[e]+"px";o[e].playlisttmbn.style.height=S[e]+"px";o[e].playlistscroll.style.height=S[e]+"px";if(o[e].playlist.className.indexOf("vl_show")>-1)rn(o[e].playlistmenu,o[e].pscrollbar,0);if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement){xt(e);if(o[e].fullscreen.className.indexOf("vl_active")>-1){o[e].fullscreen.className="vl_fullscreen vl_normal"}o[e].container.className="vl_ui";o[e].container.style.width=m[e];o[e].container.style.height=g[e];o[e].container.style.marginTop=y[e][0];o[e].container.style.marginRight=y[e][1];o[e].container.style.marginBottom=y[e][2];o[e].container.style.marginLeft=y[e][3];o[e].container.style.paddingTop=b[e][0];o[e].container.style.paddingRight=b[e][1];o[e].container.style.paddingBottom=b[e][2];o[e].container.style.paddingLeft=b[e][3];o[e].container.style.top=w[e][0];o[e].container.style.right=w[e][1];o[e].container.style.bottom=w[e][2];o[e].container.style.left=w[e][3];document.removeEventListener("mousemove",Ot,false);if(d[e]<=500){if(o[e].container.className.indexOf("vl_maxwidth500")<0)o[e].container.className+=" vl_maxwidth500";if(d[e]<=400){if(o[e].container.className.indexOf("vl_maxwidth400")<0)o[e].container.className+=" vl_maxwidth400"}if(d[e]<=320){if(o[e].container.className.indexOf("vl_maxwidth320")<0)o[e].container.className+=" vl_maxwidth320"}if(d[e]<=280){if(o[e].container.className.indexOf("vl_maxwidth280")<0)o[e].container.className+=" vl_maxwidth280"}if(d[e]<=240){if(o[e].container.className.indexOf("vl_maxwidth240")<0)o[e].container.className+=" vl_maxwidth240"}if(d[e]<=200){if(o[e].container.className.indexOf("vl_maxwidth200")<0)o[e].container.className+=" vl_maxwidth200"}}else{o[e].container.className="vl_ui"}if(v[e]<=400){if(o[e].container.className.indexOf("vl_maxheight400")<0)o[e].container.className+=" vl_maxheight400";if(d[e]<=300){if(o[e].container.className.indexOf("vl_maxheight300")<0)o[e].container.className+=" vl_maxheight300"}if(d[e]<=200){if(o[e].container.className.indexOf("vl_maxheight200")<0)o[e].container.className+=" vl_maxheight200"}}else{o[e].container.className="vl_ui"}}else{o[e].fullscreen.className="vl_fullscreen vl_full vl_active";o[e].container.className="vl_ui vl_cover";o[e].container.style.width="100%";o[e].container.style.height="100%";o[e].container.style.marginTop="0px";o[e].container.style.marginRight="0px";o[e].container.style.marginBottom="0px";o[e].container.style.marginLeft="0px";o[e].container.style.paddingTop="0px";o[e].container.style.paddingRight="0px";o[e].container.style.paddingBottom="0px";o[e].container.style.paddingLeft="0px";o[e].container.style.top="0px";o[e].container.style.right="0px";o[e].container.style.bottom="0px";o[e].container.style.left="0px";Tt(e);document.addEventListener("mousemove",Ot,false)}kt(o[e].container);Lt(e);o[e].menus.style.height=E[e]+"px";o[e].playlisttmbn.style.height=S[e]+"px";o[e].playlistscroll.style.height=S[e]+"px";nn(o[e].playlist,o[e].playlistmenu,false);en(e);Yt(e)}function Ot(){xt(c);Tt(c)}function Mt(){window.addEventListener("keydown",_t,false);it=c}function _t(e){var t;if(e.keyCode){t=e.keyCode}else if(e.which){t=e.which}if(t==32){if(document.activeElement.className.indexOf("vl_")>-1){if(e.stopPropagation){e.stopPropagation();e.preventDefault();window.addEventListener("keyup",Dt,false)}return false}}if(t==39){if(document.activeElement.className.indexOf("vl_")>-1){if(e.stopPropagation){e.stopPropagation();e.preventDefault();Jt(it,"next")}return false}}if(t==37){if(document.activeElement.className.indexOf("vl_")>-1){if(e.stopPropagation){e.stopPropagation();e.preventDefault();Jt(it,"previous")}return false}}}function Dt(){Pt(it);window.removeEventListener("keyup",Dt,false)}function Pt(t){if(o[t].presentationscreen.className.indexOf("vl_show")>-1)o[t].presentationscreen.className="vl_presentation_screen vl_active";G=t;if(o[t].play.className.indexOf("vl_playing")<0){Vt(t);e[t].play();Tt(t)}else{$t(t);e[t].pause();xt(t)}}function Ht(){window.removeEventListener("keydown",_t,false);window.removeEventListener("keyup",Xt,false)}function Bt(){window.removeEventListener("mousemove",zt,false);window.removeEventListener("mousemove",yn,false);window.removeEventListener("mousemove",fn,false);window.removeEventListener("mousemove",ln,false);o[h].played.className="vl_played vl_current";if(q[h]){o[h].volumemenu.className="vl_volume_menu";o[h].volume.className=o[h].volume.className.replace(" vl_active","");u=false;if(I[h])Tt(h)}I[h]=false;Z[G]=false;for(j=0;j<p;j++){o[j].timetooltip.className="vl_timetooltip";o[j].played.className="vl_played vl_current";o[j].vlevel.className="vl_volume_level vl_current"}}function jt(e){G=c;if(N[c]){T[c]=o[c].timetooltip.offsetLeft;N[c]=false}Ft(e,c);o[c].timetooltip.className="vl_timetooltip vl_show"}function Ft(e,t){var n=e.pageX-wt(o[t].container).left,r=Rt(t);x[t]=o[t].timetooltip.clientWidth;if(n>=d[t]){o[t].timetooltip.innerHTML=bt(r*d[t],t)}else if(n<=0){o[t].timetooltip.innerHTML=bt(0,t)}else o[t].timetooltip.innerHTML=bt(r*n,t);if(n>x[t]/2+T[t]&&n+x[t]/2<=d[t]-T[t]){o[t].timetooltip.style.marginLeft=-(x[t]/2)+"px";o[t].timetooltip.style.left=n+"px"}else if(n+x[t]/2+T[t]>d[t]){o[t].timetooltip.style.marginLeft=-x[t]+"px";o[t].timetooltip.style.left=d[t]-T[t]+"px"}else{o[t].timetooltip.style.marginLeft="0px";o[t].timetooltip.style.left=T[t]+"px"}}function It(){if(Q[G]==true){Zt(G)}if(e[G].buffered.length>0){Gt(G)}window.removeEventListener("mouseup",It,false)}function qt(){if(Z[G]==false)o[G].timetooltip.className="vl_timetooltip"}function Rt(e){var t;if(U[e])t=U[e]/d[e];else t=0;return t}function Ut(e,t){if(o[c].presentationscreen.className.indexOf("vl_show")>-1)o[c].presentationscreen.className="vl_presentation_screen vl_active";G=t;h=t;if(o[t].played.className.indexOf("vl_smooth")<0)o[t].played.className+=" vl_smooth";Wt(e,t);window.addEventListener("mousemove",zt,false);window.addEventListener("mouseup",It,false);clearInterval(X[t]);Z[t]=true}function zt(e){Wt(e,c);o[c].played.className="vl_played vl_current"}function Wt(t,n){var r=t.pageX-wt(o[n].container).left,i=Rt(n);if(r>=d[n]){o[n].loadingscreen.className="vl_loadingscreen";et[n]=true}if(r>=d[n]){o[n].videotime.innerHTML=bt(i*d[n],n)+" / "+R[n]}else if(r<=0){o[n].videotime.innerHTML=bt(0,n)+" / "+R[n]}else o[n].videotime.innerHTML=bt(i*r,n)+" / "+R[n];if(e[n].readyState>=2)e[n].currentTime=i*r;if(r<=d[n]&&r>=0){o[n].played.style.width=r+"px"}else if(r>d[n]){o[n].played.style.width=d[n]+"px"}else o[n].played.style.width="0px";Ft(t,n);o[n].timetooltip.className="vl_timetooltip vl_show"}function Xt(){Pt(c)}function Vt(t){if(e[t].ended==true){o[t].play.classList.toggle("vl_playing");o[t].played.style.width="0px";e[t].currentTime=0;z=bt(e[t].currentTime,t);o[t].videotime.innerHTML=z+" / "+R[t];Q[t]=false;Zt(t)}else{o[t].play.classList.toggle("vl_playing");if(!isNaN(e[t].duration)){R[t]=bt(e[t].duration,t);U[t]=e[t].duration}else R[t]="00:00";if(e[t].buffered.length>0){Gt(t)}Q[t]=true;Zt(t)}}function $t(e){o[e].play.classList.toggle("vl_playing");Q[e]=false;clearInterval(X[e])}function Jt(t,n){o[t].loadingscreen.className="vl_loading_screen";o[t].played.style.width=d+"px";if(e[t].className.indexOf("vl_playlist")>-1){if(o[t].pshuffle.className.indexOf("vl_active")>-1){var r=0,i=false;st[t]=parseFloat(o[t].pul.getElementsByClassName("vl_current")[0].getAttribute("data-num"));ot[t][st[t]]=true;for(r=0;r<ot[t].length;r++){if(!ot[t][r])i=true}if(i){Kt(t)}else{if(o[t].prepeat.className.indexOf("vl_active")>-1){for(r=0;r<ot[t].length;r++){ot[t][r]=false}ot[t][st[t]]=true;Kt(t)}}}else{if(n=="next"){st[t]=parseFloat(o[t].pul.getElementsByClassName("vl_current")[0].getAttribute("data-num"))+1;if(st[t]>=L[t][0].length&&o[t].prepeat.className.indexOf("vl_active")<0)st[t]=L[t][0].length-1;else if(st[t]>=L[t][0].length&&o[t].prepeat.className.indexOf("vl_active")>-1)st[t]=0}else{st[t]=parseFloat(o[t].pul.getElementsByClassName("vl_current")[0].getAttribute("data-num"))-1;if(st[t]<0&&o[t].prepeat.className.indexOf("vl_active")<0)st[t]=0;else if(st[t]<0&&o[t].prepeat.className.indexOf("vl_active")>-1)st[t]=L[t][0].length-1}}sn("",L[t][0][st[t]],t,0)}}function Kt(e){var t=Math.random();t=Math.round(t*(ot[e].length-1));while(ot[e][t]){t=Math.random();t=Math.round(t*(ot[e].length-1))}st[e]=t}function Qt(e){e.classList.toggle("vl_active");if(e.className=="vl_playlist_shuffle vl_background"){for(j=0;j<ot[c].length;j++){ot[c][j]=false}}}function Gt(e){clearInterval($[e]);$[e]=setInterval(function(){Yt(e)},100)}function Yt(t){K[t]=e[t].buffered.length-1;if(K[t]>-1){J=tn(e[t].buffered.end(K[t]),U[t],d[t]);o[t].loaded.style.width=J+"px";if(e[t].buffered.end(K[t])>=U[t]){clearInterval($[t])}}}function Zt(e){var t;Q[e]=true;clearInterval(X[e]);X[e]=setInterval(function(){en(e)},100)}function en(t){z=bt(e[t].currentTime,t);if(!isNaN(U[t]))R[t]=bt(U[t],t);else R[t]="00:00";if(!isNaN(e[t].currentTime))z=bt(e[t].currentTime,t);else z="00:00";o[t].videotime.innerHTML=z+" / "+R[t];if(e[t].currentTime<=U[t])current_time=e[t].currentTime;else current_time=U[t];V=tn(current_time,U[t],d[t]);o[t].played.style.width=V+"px";if(e[t].ended){o[t].play.className="vl_play";clearInterval(X[t])}}function tn(e,t,n){var r=n/t;r=Math.round(r*e);return r}function nn(e,t,n){if(n){e.classList.toggle("vl_active");t.classList.toggle("vl_show");if(o[c].presentationscreen.className.indexOf("vl_show")>-1)o[c].presentationscreen.className="vl_presentation_screen vl_active"}if(e.className.indexOf("vl_playlist vl_show vl_active")>-1){Lt(c);o[c].playlisttmbn.style.height=S[c]+"px";o[c].playlistscroll.style.height=S[c]+"px";if(o[c].captions.className.indexOf("vl_show vl_active")>-1)o[c].captions.className="vl_captions vl_show";o[c].captionsmenu.className="vl_captions_menu vl_background";rn(o[c].playlistmenu,o[c].pscrollbar,0)}else if(e.className.indexOf("vl_captions vl_show vl_active")>-1){if(o[c].playlist.className.indexOf("vl_show vl_active")>-1)o[c].playlist.className="vl_playlist vl_show";o[c].playlistmenu.className="vl_playlist_menu";rn(o[c].captionsmenu,o[c].cscrollbar,1)}else{D[c][0]=0;D[c][1]=0}}function rn(e,t,n){var r=C[c][n].offsetTop;if(n==1){current_element=o[c].captionsmenu.getElementsByClassName("vl_current")[0].offsetTop-r;C[c][n].scrollTop=current_element;A[c][n]=C[c][n].clientHeight+r;D[c][n]=C[c][n].scrollHeight+r}else{current_element=o[c].playlistmenu.getElementsByClassName("vl_current")[0].offsetTop-r;C[c][n].scrollTop=current_element;A[c][n]=C[c][n].clientHeight;D[c][n]=C[c][n].scrollHeight}if(A[c][n]>=D[c][n]){if(e.className.indexOf("vl_noscroll")<0)e.className+=" vl_noscroll"}else{e.className=e.className.replace(" vl_noscroll","")}O[c][n]=C[c][n].scrollTop;O[c][n]=Math.round(A[c][n]*(O[c][n]/D[c][n]));A[c][n]=Math.round(A[c][n]*(A[c][n]/D[c][n]));t.style.height=A[c][n]+"px";t.style.top=O[c][n]+"px"}function sn(n,r,i,u){var a,f,l;a=parseFloat(r.getAttribute("data-num"));if(n!=""){n.className=n.className.replace(" vl_show","");o[i].playlist.className=o[i].playlist.className.replace(" vl_active","");o[i].captions.className=o[i].captions.className.replace(" vl_active","")}if(u==0){if(n!=""){for(j=0;j<ot[i].length;j++){ot[i][j]=false}}if(r.className=="vl_current"){e[i].currentTime=0}else{for(j=0;j<L[i][u].length;j++){L[i][u][j].className=""}r.className="vl_current";f=a+1;if(o[i].quality.className.indexOf("vl_active")>-1&&t[i][a].hd.length>0){rt=true}nt=true;numstock=i;W=0;o[i].videotitle.innerHTML=t[i][a].sd[0].title;o[i].vidnum.innerHTML=f+"/"+yt(i)[1];pt(t[i][a],i)}}else if(u=1){for(j=0;j<L[i][u].length;j++){L[i][u][j].className=""}l=r.getAttribute("data-track");r.className="vl_current";var c=e[i].getElementsByTagName("track");var h=Array.prototype.slice.call(c,0);h=h.indexOf(t[i][a].tracks[l]);if(typeof e[i].textTracks!="undefined"){for(k=0;k<c.length;k++){e[i].textTracks[k].mode="hidden"}s[i][a]=l;if(h>-1){if(typeof e[i].textTracks[h]!="undefined"){e[i].textTracks[h].mode="showing";ut[i]=t[i][a].tracks[l].getAttribute("label")}}else if(r.innerHTML=="None"){ut[i]="None"}}}}function on(e,t){if(t==1){var n=C[c][t].offsetTop;A[c][t]=C[c][t].clientHeight+n;D[c][t]=C[c][t].scrollHeight+n}else A[c][t]=C[c][t].clientHeight;O[c][t]=C[c][t].scrollTop;O[c][t]=Math.round(A[c][t]*(O[c][t]/D[c][t]));e.style.top=O[c][t]+"px"}function un(e,t,n,r){M=true;an(e,t,n,r);if(r==0)window.addEventListener("mousemove",fn,false);else window.addEventListener("mousemove",ln,false)}function an(e,t,n,r){var i=C[c][r].clientHeight-n.clientHeight,s=C[c][r].clientHeight;if(r==1){var o=C[c][r].offsetTop;i=C[c][r].clientHeight-n.clientHeight+o;s=C[c][r].clientHeight+o}var u=e.pageY-wt(t).top,a=u-_;max_scroll_menu=C[c][r].scrollHeight-C[c][r].clientHeight;if(typeof e.target.className!="undefined"){if(e.target.className.indexOf("scrollbar")>-1&&M){_=u-n.offsetTop;a=u-_;M=false}else if(M){_=n.clientHeight/2;M=false}}a=u-_;a=Math.round(a*(max_scroll_menu/i));C[c][r].scrollTop=a}function fn(e){cn(e,o[c].playlistscroll,o[c].pscrollbar,0)}function ln(e){cn(e,o[c].captionsscroll,o[c].cscrollbar,1)}function cn(e,t,n,r){an(e,t,n,r)}function hn(n){var r;if(e[c].children[0].getAttribute("data-num")!=null)r=parseFloat(e[c].children[0].getAttribute("data-num"));else r=0;if(n.className=="vl_repeat"){n.classList.toggle("vl_active");e[c].loop=true;o[c].repeat.setAttribute("data-content","Repeat (is on)")}else if(n.className=="vl_repeat vl_active"){n.classList.toggle("vl_active");e[c].loop=false;o[c].repeat.setAttribute("data-content","Repeat (is off)")}else if(n.className=="vl_quality"){n.classList.toggle("vl_active");W=e[c].currentTime;if(e[c].paused==false)nt=true;else nt=false;h=c;rt=true;pt(t[c][r],c);o[c].quality.setAttribute("data-content","High definition (is on)")}else if(n.className=="vl_quality vl_active"){n.classList.toggle("vl_active");W=e[c].currentTime;if(e[c].paused==false)nt=true;else nt=false;h=c;rt=false;pt(t[c][r],c);o[c].quality.setAttribute("data-content","High definition (is off)")}}function pn(){kt(this.parentNode.parentNode.parentNode.parentNode.parentNode);var e;o[c].volumemenu.className="vl_volume_menu vl_show";if(F[c]){P[c]=o[c].vbar.clientHeight;e=P[c]*B[c];if(o[c].vlevel.className.indexOf(" vl_hold")<0)o[c].vlevel.className+=" vl_hold";o[c].vlevel.style.height=e+"px"}q[c]=false}function dn(){h=c;if(o[c].vlevel.clientHeight>0){H[c]=o[c].vlevel.clientHeight;o[c].vlevel.style.height="0px";if(o[c].volume.className.indexOf("vl_mute")<0)o[c].volume.className+=" vl_mute";e[c].muted=true}else if(o[c].volume.className.indexOf("vl_volume vl_mute")<0){o[c].volume.className=o[c].volume.className.replace(" vl_mute","");o[c].vlevel.style.height=H[c]+"px";e[c].muted=false}F[c]=false;o[c].vlevel.className=o[c].vlevel.className.replace(" vl_hold","")}function vn(){if(!I[c]){o[c].volumemenu.className="vl_volume_menu";o[c].volume.className=o[h].volume.className.replace(" vl_active","");u=false}q[c]=true}function mn(){if(o[c].volume.className.indexOf(" vl_active")<0)o[c].volume.className+=" vl_active";o[c].volumemenu.className="vl_volume_menu vl_show";q[c]=false;u=true}function gn(e){h=c;if(F[h]){o[h].vlevel.className=o[h].vlevel.className.replace(" vl_hold","");F[h]=false}I[h]=true;bn(e);window.addEventListener("mousemove",yn,false)}function yn(e){bn(e);if(o[h].vlevel.className.indexOf("vl_hold")<0)o[h].vlevel.className+=" vl_hold"}function bn(t){var n=P[h]-(t.pageY-wt(o[h].vbar).top),r,i;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement){n=P[h]-(t.screenY-wt(o[h].vbar).top)}e[h].muted=false;if(n>=0)i=n;else i=0;if(P[h]>0)H[h]=P[h];if(i<=H[h]&&i>=0){o[h].vlevel.style.height=i+"px"}else if(i>H[h])o[h].vlevel.style.height=H[h]+"px";else o[h].vlevel.style.height="0px";r=i/H[h];if(r>1)r=1;else if(r>.5&&n>=0)o[h].volume.className="vl_volume vl_loud vl_active";else if(r<=.5&&r>0&&n>=0)o[h].volume.className="vl_volume vl_low vl_active";else if(r<=0&&n>=-P[h])o[h].volume.className="vl_volume vl_mute vl_active";e[h].volume=r}function wn(){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement){kt(o[c].container);m[c]=d[c]+"px";g[c]=v[c]+"px";y[c][0]=o[c].container.style.marginTop;y[c][1]=o[c].container.style.marginRight;y[c][2]=o[c].container.style.marginBottom;y[c][3]=o[c].container.style.marginLeft;b[c][0]=o[c].container.style.paddingTop;b[c][1]=o[c].container.style.paddingRight;b[c][2]=o[c].container.style.paddingBottom;b[c][3]=o[c].container.style.paddingLeft;w[c][0]=o[c].container.style.top;w[c][1]=o[c].container.style.right;w[c][2]=o[c].container.style.bottom;w[c][3]=o[c].container.style.left;if(o[c].container.requestFullscreen){o[c].container.requestFullscreen()}else if(o[c].container.msRequestFullscreen){o[c].container.msRequestFullscreen()}else if(o[c].container.mozRequestFullScreen){o[c].container.mozRequestFullScreen()}else if(o[c].container.webkitRequestFullscreen){o[c].container.webkitRequestFullscreen()}o[c].container.style.width="100%";o[c].container.style.height="100%"}else{if(document.exitFullscreen){document.exitFullscreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}var e=document.getElementsByClassName("videolayer"),t=[],n=[],r=[],s=[],o=[],u=false,a=[],f=[],c=0,h=c,p=e.length,d=[],v=[],m=[],g=[],y=[[],[],[],[]],b=[[],[],[],[]],w=[[],[],[],[]],E=[],S=[],x=[],T=[],N=[],C=[],L=[],A=[],O=[],M=true,_=0,D=[],P=[],H=[],B=[],F=[],I=[],q=[],R=[],U=[],z=0,W=0,X=[],V=0,$=[],J=0,K=[],Q=[],G=0,Y=0,Z=[],et=[],tt=[],nt=false,rt=false,it=0,st=[],ot=[],ut=[];if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){for(i=0;i<e.length;i++){e[i].controls=true}}else{lt()}}window.addEventListener("load",VideoLayer)